<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/assets/js/jquery.min.js"></script>
    <link rel="stylesheet" href="/assets/css/TQ.css">
    <link rel="stylesheet" href="/assets/css/shadowCover.css">
    <link rel="stylesheet" href="/assets/css/switchSubjectContent.css">
    <link rel="stylesheet" href="/assets/css/settingContent.css">
    <link rel="stylesheet" href="/assets/css/slideSwitch.css">
    <link rel="stylesheet" href="/assets/css/modalCard.css">
    <link rel="stylesheet" href="/assets/css/responseTip.css">
    <script src="/assets/js/TQ.js" type="module"></script>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <title>www.TQ.org</title>
</head>

<body>
    <div class="content">
        <div class="QA">
            <div class="title-content">
                <%- include('./partials/titleChoiceContent.ejs') -%>
            </div>
            <div class="explanation-content">
                <% if(userSetting.instantJudge && titleDto.userAnswer) {%>
                    <%- include('./partials/explanationContent.ejs') -%>
                <% } %>
            </div>
        </div>
        <div class="table-content">
            <ul>
                <% for(var i=1; i <=titleDtoList.length; i++){ %>
                    <% 
                        const oneTitle=titleDtoList[i - 1]; 
                        let className='' ; 
                        if (oneTitle.userAnswer) { 
                            className+='answered' ; 
                            if (userSetting && userSetting.instantJudge) { 
                                if(oneTitle.userAnswer.isChoiceCorrect) { 
                                    className +=' right' ; 
                                } else {
                                    className +=' wrong' ; 
                                } 
                            } 
                        } 
                    %>
                        <li id="No<%= titleDtoList[i-1]._id %>" class="<%= className %>">
                            <%= i %>
                        </li>
                        <% } %>
            </ul>
        </div>
    </div>

    <div class="panel">
        <div class="float-btn">＋</div>
        <div class="actions">
            <div class="actions-item" id="subjectName">
                <%= subjectName %>
            </div>
            <div class="actions-item" id="chapterName">
                <%= chapterName %>
            </div>
            <div class="actions-item" id="sectionName" style="border-bottom: 1px solid rgb(146, 144, 144);">
                <%= sectionName %>
            </div>
            <div class="action actions-item" id="selectSubject">选择科目与章节</div>
            <div class="action actions-item" id="saveAnswer">提交作答版本</div>
            <% if(user && user.role=='admin') { %>
            <div class="action actions-item" id="uploadPictureOfTitle">添加题干图片</div>
            <div class="action actions-item" id="uploadPictureOfExplan">添加解释图片</div>
            <div class="action actions-item" id="editTitle">编辑题目</div>
            <% } %>
            <div class="action actions-item" id="addFavoriteTitle">加入收藏</div>
            <div class="action actions-item" id="restartAnswer">重新做题</div>
            <div class="action actions-item" id="setting">偏好设置</div>
        </div>
    </div>

    <div class="switchSubject-content modalCard"></div>

    <div class="setting-content modalCard">
        <%- include('./partials/settingContent.ejs')-%>
    </div>

    <div class="uploadPictureOfTitle-content modalCard">
        <form>
            <div></div>
            <input type="file" name="picture" id="inputPictureOfTitle" required>
            <input type="submit" value="上传">
        </form>
    </div>

    <div class="uploadPictureOfExplan-content modalCard">
        <form>
            <div></div>
            <input type="file" name="picture" id="inputPictureOfExplan" required>
            <input type="submit" value="上传">
        </form>
    </div>

    <div class="addFavoriteTitle-content modalCard">
            <form>
                <div></div>
                <input type="text" name="keywords" id="inputKeywords" placeholder="添加收藏关键词(多个关键词请用逗号分隔)" required>
                <textarea name="comment" id="inputComment" placeholder="添加收藏备注(可选)"></textarea>
                    <small>提示：关键词和备注用于搜索收藏的题目</small>
                <input type="submit" value="加入收藏">
            </form>
    </div>

    <div class="editTitle-content modalCard">
        <form>
            <div></div>
            <textarea name="title" id="inputTitle"></textarea>
            <textarea name="explanation" id="inputExplanation"></textarea>
            <input type="submit" value="保存编辑">
        </form>
    </div>

    <div class="shadow-cover"></div>
    <div class="response-tip"></div>
</body>

</html>